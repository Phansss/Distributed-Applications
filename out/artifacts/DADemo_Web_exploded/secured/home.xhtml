<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
   <title>Main Page</title>
   <h:outputStylesheet library = "css" name = "styles.css"  />
</h:head>

<h:body style="margin: 0" class="background">

   <div class="header">
      <h1 style="align-self: center; margin: 0;">Rate Your Professor by P&amp;D</h1>

      <h:outputText style="align-self: right" value="Welcome #{homeScreenBean.userFullName}"/>
   </div>

   <div class="row">
      <div class="left">
         <div class="sticky">
            <br/>
            <div class="margin-10-left white-background sticky">

               <h1>My Courses</h1>

               <!-- A menu has to be inside a form tag because it has implementations for action selection -->
                  <!--<p:menu id="courseMenuModel" model="#{homeScreenBean.courseMenu}" toggleable="true">
                     <p:autoUpdate/>

                  </p:menu>-->
<!--                  <p:outputLabel for="@next" value="Select Course"/>-->

                  <div class="card">
                     <h:form name = "form-menu">
                        <h5>Programmatic</h5>
                        <p:menu  id="course-menu" model="#{homeScreenBean.courseMenu}"/>
                           <p:autoUpdate/>
                     </h:form>

                  </div>



                 <!-- <p:selectOneMenu id="my-courses" value="#{homeScreenBean.subscribedCourses}" var = "c">
                  <p:autoUpdate/>
                     <f:selectItem itemLabel="Select Course" itemValue=""/>
                     <f:selectItems value="#{homeScreenBean.subscribedCoursesMap.keySet()}" var = "course" itemLabel= "#{course}" itemValue=
                                "#{course}"/>
                     <p:column>
                        #{c.name}
                        <f:facet name="header">
                           <h:outputText value="Course"/>
                        </f:facet>
                     </p:column>
                     <f:facet name="footer">
                        <p:separator />
                        <h:outputText value="#{homeScreenBean.subscribedCoursesMap.keySet().size()} subscribed courses" style="font-weight:bold;"/>
                     </f:facet>-->

               <!--   </p:selectOneMenu>-->




               <h:form id="form-add">
               <h1>Add course</h1>
                  <p:selectCheckboxMenu id="multiple-add" value="#{addCourseSelector.coursesToAdd}" filter="true"
                                        filterMatchMode="contains" label="Courses" updateLabel="false"
                                        style="min-width: 15rem" panelStyle="width: 30rem" scrollHeight="250" multiple="true">
                        <f:selectItems value="#{homeScreenBean.unSubscribedCourses}"
                                       var="courseEntity" itemLabel="#{courseEntity.name}"/>
                  </p:selectCheckboxMenu>
                  <p:commandButton action="#{homeScreenBean.addCourses}" value="Add" update="form-add:multiple-add,
                  form-remove:multiple-remove" styleClass="p-mt-3" />

               </h:form>


               <h:form id="form-remove" >
               <h1>Remove course</h1>
                  <p:selectCheckboxMenu id="multiple-remove" value="#{removeCourseSelector.coursesToRemove}" filter="true"
                                        filterMatchMode="contains" label="Courses" updateLabel="false"
                                        style="min-width: 15rem" panelStyle="width: 30rem" scrollHeight="250" multiple="true">
                     <f:selectItems value="#{homeScreenBean.subscribedCourses}"
                                    var="courseEntity" itemLabel="#{courseEntity.name}"/>
                  </p:selectCheckboxMenu>
                  <p:commandButton action="#{homeScreenBean.removeCourses}" value="Remove" update="form-add:multiple-add,
                  form-remove:multiple-remove" styleClass="p-mt-3" />

               </h:form>

            </div>
         </div>
      </div>
      <div class="middle margin-10-left">
         <h:form id="repeatform">
            <p:autoUpdate/>
            <h1 class="text-on-background">Latest Comments on <h:outputText value="#{homeScreenBean.currentCourse.name}"/></h1>
            <p:repeat value="#{homeScreenBean.currentRatingTextComments}" var="comment">
             <div class="commentBox white-background">
               <br/>
                  <b><h:outputText value="Sender: "/></b><h:outputText value="#{comment.person.name} #{comment.person.lastName}"/>
                  <br/><br/>
                  <b><h:outputText value="About: "/></b><h:outputText value="prof. #{comment.professor.surname}"/>
                  <br/><br/>
                  <b><h:outputText value="Rating: "/></b><h:outputText value="#{comment.rating}"/>
                  <br/><br/>
                  <h:outputText value="#{comment.text}"/>
                  <br/><br/>
                  <h:outputText class="timeText" value="Posted on: #{comment.timePosted}"/>
                  <br/>
               </div>
               <br/>
            </p:repeat>

            <p:repeat value="#{homeScreenBean.currentTextComments}" var="comment">
               <div class="commentBox white-background">
                  <br/>
                  <b><h:outputText value="Sender: "/></b><h:outputText value="#{comment.person.name} #{comment.person.lastName}"/>
                  <br/><br/>
                  <b><h:outputText value="About: "/></b><h:outputText value="prof. #{comment.professor.surname}"/>
                  <br/><br/>
                  <h:outputText value="#{comment.text}"/>
                  <br/><br/>
                  <h:outputText class="timeText" value="Posted on: #{comment.timePosted}"/>
                  <br/>
               </div>
               <br/>
            </p:repeat>

            <p:repeat value="#{homeScreenBean.currentRatingComments}" var="comment">
               <div class="commentBox white-background">
                  <br/>
                  <b><h:outputText value="Sender: "/></b><h:outputText value="#{comment.person.name} #{comment.person.lastName}"/>
                  <br/><br/>
                  <b><h:outputText value="About: "/></b><h:outputText value="prof. #{comment.professor.surname}"/>
                  <br/><br/>
                  <b><h:outputText value="Rating: "/></b><h:outputText value="#{comment.rating}"/>
                  <br/><br/>
                  <h:outputText class="timeText" value="Posted on: #{comment.timePosted}"/>
                  <br/>
               </div>
               <br/>
            </p:repeat>

         </h:form>
      </div>
      <div class="right" >
         <div class="sticky">
            <br/>
            <div class="margin-10-right white-background">

               <h1>Make a new comment</h1>

               <h3>Text</h3>
               <h:form>
                  <h:inputTextarea value="#{homeScreenBean.inputCommentText}"/>

                  <br/><br/>

                  <h3>Rating</h3>
                  <p:rating value="#{homeScreenBean.inputCommentRating}"/>
                  <br/><br/>
                  <br/><br/>

                  <h3>About Professor</h3>
                  <p:selectOneMenu id="professorsDropdown" value="#{homeScreenBean.chosenProfessor}">
                     <p:autoUpdate/>
                     <f:selectItems value="#{homeScreenBean.currentCourseProfessors}"/>
                  </p:selectOneMenu>

                  <br/><br/><br/>

                  <h:commandButton action = "homeScreenBean" value = "Add Comment" actionListener="#{homeScreenBean.printRating()}"/><br/>
               </h:form>
            </div>
         </div>
      </div>
   </div>

</h:body>

</html>